<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{{ data.nombre }} - Portfolio{% endblock %}</title>

    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">

    <!-- Fuente profesional -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Navegación -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-brand">
                <a href="{{ url_for('index') }}">{{ data.nombre }}</a>
            </div>

            <ul class="nav-menu">
                <li><a href="#inicio">Inicio</a></li>
                <li><a href="#formacion">Formación</a></li>
                <li><a href="#experiencia">Experiencia</a></li>
                <li><a href="#sobre-mi">Sobre mí</a></li>
                <li><a href="#proyectos">Proyectos</a></li>
                <li><a href="#contacto">Contacto</a></li>
            </ul>

            <div class="nav-toggle" aria-label="Abrir menú" role="button" tabindex="0">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- Contenido principal -->
    <main>
        {% block content %}{% endblock %}
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <p>&copy; {{ year }} {{ data.nombre }}. Todos los derechos reservados.</p>

                <div class="social-links">
                    {% if data.linkedin %}
                    <a href="{{ data.linkedin }}" target="_blank" rel="noopener" aria-label="LinkedIn">
                        <i class="fab fa-linkedin"></i>
                    </a>
                    {% endif %}
                    {% if data.github %}
                    <a href="{{ data.github }}" target="_blank" rel="noopener" aria-label="GitHub">
                        <i class="fab fa-github"></i>
                    </a>
                    {% endif %}
                    {% if data.email %}
                    <a href="mailto:{{ data.email }}" aria-label="Email">
                        <i class="fas fa-envelope"></i>
                    </a>
                    {% endif %}
                </div>
            </div>
        </div>
    </footer>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>

    <!-- ✅ JS DEL MAZO: izquierda / centro / derecha -->
    <script>
  (function () {
    const deck = document.querySelector("#sobre-mi .deck");
    if (!deck) return;

    const states = ["is-left", "is-center", "is-right"];
    let idx = 1; // empieza en center

    const setStateByIndex = (nextIdx) => {
      idx = Math.max(0, Math.min(2, nextIdx));
      deck.classList.remove(...states);
      deck.classList.add(states[idx]);
    };

    setStateByIndex(1);

    // --- Desktop hover (se mantiene) ---
    const left = deck.querySelector(".hot.left");
    const center = deck.querySelector(".hot.center");
    const right = deck.querySelector(".hot.right");

    if (left) left.addEventListener("mouseenter", () => setStateByIndex(0));
    if (center) center.addEventListener("mouseenter", () => setStateByIndex(1));
    if (right) right.addEventListener("mouseenter", () => setStateByIndex(2));
    deck.addEventListener("mouseleave", () => setStateByIndex(1));

    // --- Mobile swipe (paso a paso, menos sensible) ---
    let startX = 0;
    let startY = 0;
    let isDragging = false;

    // Ajusta sensibilidad:
    const MIN_SWIPE_PX = 40;     // cuanto tiene que arrastrar para cambiar
    const MAX_OFF_AXIS = 60;     // tolerancia vertical (si hay mucho scroll vertical, no actúa)

    deck.addEventListener(
      "touchstart",
      (e) => {
        const t = e.touches[0];
        startX = t.clientX;
        startY = t.clientY;
        isDragging = true;
      },
      { passive: true }
    );

    deck.addEventListener(
      "touchmove",
      (e) => {
        if (!isDragging) return;

        const t = e.touches[0];
        const dx = t.clientX - startX;
        const dy = t.clientY - startY;

        // Si el gesto es más vertical que horizontal, lo ignoramos (para no fastidiar el scroll)
        if (Math.abs(dy) > Math.abs(dx) && Math.abs(dy) > 10) {
          isDragging = false;
          return;
        }

        // Si el gesto es claramente horizontal, evitamos que la página “tiemble”
        if (Math.abs(dx) > 10 && Math.abs(dy) < MAX_OFF_AXIS) {
          e.preventDefault();
        }
      },
      { passive: false }
    );

    deck.addEventListener(
      "touchend",
      (e) => {
        if (!isDragging) return;
        isDragging = false;

        const t = e.changedTouches[0];
        const dx = t.clientX - startX;
        const dy = t.clientY - startY;

        // si se fue mucho en vertical, no hacemos nada
        if (Math.abs(dy) > MAX_OFF_AXIS) return;

        if (dx <= -MIN_SWIPE_PX) {
          // swipe izquierda -> mueve “a la derecha” (paso a paso)
          setStateByIndex(idx + 1);
        } else if (dx >= MIN_SWIPE_PX) {
          // swipe derecha -> mueve “a la izquierda”
          setStateByIndex(idx - 1);
        }
      },
      { passive: true }
    );
  })();
</script>

</body>
</html>
